<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
  <title>Live Views ‚Äî AI-Native Persona Browser</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <style>
    body{
      font-family:'Inter',sans-serif;
      background:#fafafa;
      margin:0;
      color:#000;
      text-align:center;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    h1{font-size:26px;font-weight:700;margin-bottom:12px;}
    p{font-size:16px;color:#555;margin:6px 0;}
    #count{
      font-size:56px;
      font-weight:700;
      color:#007aff;
      margin-top:20px;
    }
    footer{position:fixed;bottom:20px;font-size:13px;color:#999;}
    .pulse {
      animation:pulse 2s infinite;
    }
    @keyframes pulse {
      0% {transform:scale(1);opacity:1;}
      50% {transform:scale(1.05);opacity:0.7;}
      100% {transform:scale(1);opacity:1;}
    }
  </style>
</head>
<body>
  <h1>üëÅ Live Views</h1>
  <p>AI-Native Persona Browser</p>
  <div id="count" class="pulse">0</div>
  <footer>Connected to three23p-backend.onrender.com</footer>

  <script>
    const counter=document.getElementById("count");
    const socket=io("https://three23p-backend.onrender.com");

    async function updateViews(){
      try{
        const res=await fetch("https://three23p-backend.onrender.com/api/views-readonly");
        const data=await res.json();
        counter.textContent=data.total.toLocaleString();
      }catch{
        counter.textContent="offline";
        counter.style.color="red";
      }
    }

    // Initial load + every 5s refresh
    updateViews();
    setInterval(updateViews,5000);

    // Optional real-time trigger from server (if you add socket.emit on increment)
    socket.on("viewUpdate",v=>{
      counter.textContent=v.total.toLocaleString();
    });
  </script>
</body>
</html>
